{"version":3,"file":"CLIttnAKTpoF3N2pgwE.js","sources":["../../app/components/ltFileThumbnail.vue"],"sourcesContent":["<template>\n  <img\n    class=\"img-fluid img-thumbnail\"\n    :src=\"lazyUrl\"\n    :lazy-img=\"thumbnailUrl\"\n    style=\"max-height: 100%; cursor: zoom-in; width: 100%\"\n    @click=\"dialogShown = true\"\n    @load=\"setLazyImg($event)\"\n  />\n  <div\n    v-if=\"dialogShown\"\n    class=\"modal\"\n    style=\"display: block; cursor: zoom-out; background: rgba(0, 0, 0, 0.5)\"\n    @click=\"dialogShown = false\"\n  >\n    <div class=\"modal-dialog modal-fullscreen\">\n      <div class=\"modal-content\">\n        <div class=\"modal-body text-center\">\n          <img\n            class=\"img-fluid\"\n            :src=\"thumbnailUrl\"\n            :lazy-img=\"imageUrl\"\n            style=\"width: 100%; height: 100%; object-fit: contain\"\n            @load=\"setLazyImg($event)\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, computed} from 'vue';\nimport type {CommonsFile} from '../model';\n\nconst dialogShown = ref(false);\n\nconst props = defineProps<{\n  file: CommonsFile;\n}>();\n\nconst lazyUrl = computed(() => props.file.imageUrl(120));\n\nconst thumbnailUrl = computed(() => props.file.imageUrl(1024));\n\nconst imageUrl = computed(() => {\n  const width = window.innerWidth * (window.devicePixelRatio || 1);\n  // use widths from UploadThumbnailRenderMap and MediaViewerThumbnailBucketSizes settings\n  return props.file.imageUrl(width > 2560 ? undefined : width > 1280 ? 2560 : 1280);\n});\n\nfunction setLazyImg($event: Event) {\n  const img = $event.target as HTMLImageElement;\n  const lazy = img.getAttribute('lazy-img');\n  if (!lazy || img.src === lazy) return;\n  img.src = lazy;\n}\n</script>\n"],"names":["dialogShown","ref","props","__props","lazyUrl","computed","thumbnailUrl","imageUrl","width","setLazyImg","$event","img","lazy"],"mappings":"49EAmCM,MAAAA,EAAcC,EAAI,EAAK,EAEvBC,EAAQC,EAIRC,EAAUC,EAAS,IAAMH,EAAM,KAAK,SAAS,GAAG,CAAC,EAEjDI,EAAeD,EAAS,IAAMH,EAAM,KAAK,SAAS,IAAI,CAAC,EAEvDK,EAAWF,EAAS,IAAM,CAC9B,MAAMG,EAAQ,OAAO,YAAc,OAAO,kBAAoB,GAEvD,OAAAN,EAAM,KAAK,SAASM,EAAQ,KAAO,OAAYA,EAAQ,KAAO,KAAO,IAAI,CAAA,CACjF,EAED,SAASC,EAAWC,EAAe,CACjC,MAAMC,EAAMD,EAAO,OACbE,EAAOD,EAAI,aAAa,UAAU,EACpC,CAACC,GAAQD,EAAI,MAAQC,IACzBD,EAAI,IAAMC,EACZ"}