{"version":3,"file":"KLlwUnDTxr9JUgyjxTt.js","sources":["../../app/components/ltLocationInput.vue","../../app/components/ltFileDetails.vue","../../node_modules/bootstrap-icons/icons/house-fill.svg?raw","../../app/components/ltMap.vue","../../app/components/ltGeolocate.vue"],"sourcesContent":["<template>\n  <div class=\"input-group\">\n    <input\n      ref=\"inputElement\"\n      :value=\"modelValue.csv\"\n      class=\"form-control\"\n      type=\"text\"\n      @blur=\"updateLatLng(($event.target as HTMLInputElement).value)\"\n      @paste=\"\n        updateLatLng($event.clipboardData?.getData('text'));\n        $event.preventDefault();\n      \"\n    />\n    <button\n      class=\"btn btn-outline-secondary\"\n      type=\"button\"\n      :title=\"t('Discard')\"\n      @click=\"rollback()\"\n    >\n      <XSquare />\n    </button>\n    <button\n      class=\"btn btn-outline-success\"\n      type=\"button\"\n      :title=\"t('Save')\"\n      :disabled=\"!modelValue?.isChanged\"\n      @click=\"emit('editLocation')\"\n    >\n      <Save />\n    </button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref} from 'vue';\nimport {LatLng} from '../model';\nimport {t} from './useI18n';\nimport Save from 'bootstrap-icons/icons/save.svg?component';\nimport XSquare from 'bootstrap-icons/icons/x-square.svg?component';\n\n// Support lat,lon\n// Support https://geohack.toolforge.org/geohack.php?pagename=Category:War_memorial,_Schwoich&params=47.54427805_N_12.14066878_E_globe:Earth_&language=en-gb\nconst REGEXP = /(?<lat>[+-]?\\d+\\.?\\d*)(_(?<ns>[NS]))?[_,;\\s]+(?<lng>[+-]?\\d+\\.?\\d*)(_(?<ew>[EW]))?/;\n\nconst modelValue = defineModel<LatLng>({required: true});\n\nconst emit = defineEmits<{\n  editLocation: [];\n}>();\nconst type = ref(modelValue.value?.type);\nconst inputElement = ref<HTMLInputElement | null>(null);\n\nfunction updateLatLng(viewValue: string | undefined) {\n  if (viewValue === undefined) return;\n  if (!type.value) {\n    // keep track of coordinate type since it is lost\n    // when returning undefined on invalid input\n    const t = modelValue.value?.type;\n    if (t) type.value = t;\n  }\n  const m = viewValue.match(REGEXP);\n  const valid = !!m || !viewValue;\n  inputElement.value?.classList?.toggle('is-invalid', !valid);\n  if (!valid) return;\n\n  modelValue.value = new LatLng(\n    type.value!,\n    m?.groups ? parseFloat(m.groups.lat) * (m.groups.ns === 'S' ? -1 : 1) : undefined,\n    m?.groups ? parseFloat(m.groups.lng) * (m.groups.ew === 'W' ? -1 : 1) : undefined,\n    modelValue.value.lat,\n    modelValue.value.lng\n  );\n}\n\nfunction rollback() {\n  modelValue.value = modelValue.value?.rollback();\n}\n</script>\n","<template>\n  <button\n    class=\"btn btn-success form-control\"\n    type=\"button\"\n    :disabled=\"!(coordinates?.isChanged || objectLocation?.isChanged)\"\n    @click=\"editLocation()\"\n  >\n    <Save class=\"me-1\" />\n    {{ t('Save') }}\n  </button>\n  <div class=\"card mt-2\">\n    <div class=\"card-body p-2\">\n      <div>\n        <label @click=\"collapseCameraLocation = !collapseCameraLocation\">\n          <span v-show=\"!collapseCameraLocation\" class=\"text-secondary me-1\">▼</span>\n          <span v-show=\"collapseCameraLocation\" class=\"text-secondary me-1\">▶</span>\n          <CameraFill class=\"me-1\" />\n          <!-- eslint-disable-next-line vue/no-v-html -->\n          <span v-html=\"msgCameraLocation\"></span>\n          <abbr\n            v-show=\"!collapseCameraLocation\"\n            :title=\"t('Left click on map to set the location.')\"\n          >\n            <QuestionCircle />\n          </abbr>\n        </label>\n        <div v-show=\"!collapseCameraLocation\">\n          <lt-location-input v-model=\"coordinates\" @edit-location=\"editLocation([coordinates])\" />\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"card mt-2\">\n    <div class=\"card-body p-2\">\n      <div>\n        <label @click=\"collapseObjectLocation = !collapseObjectLocation\">\n          <span v-show=\"!collapseObjectLocation\" class=\"text-secondary me-1\">▼</span>\n          <span v-show=\"collapseObjectLocation\" class=\"text-secondary me-1\">▶</span>\n          <HouseFill class=\"me-1\" />\n          <!-- eslint-disable-next-line vue/no-v-html -->\n          <span v-html=\"msgObjectLocation\"></span>\n          <abbr\n            v-show=\"!collapseObjectLocation\"\n            :title=\"t('Press shift and click on map to set the object location.')\"\n          >\n            <QuestionCircle />\n          </abbr>\n        </label>\n        <div v-show=\"!collapseObjectLocation\">\n          <lt-location-input\n            v-model=\"objectLocation\"\n            @edit-location=\"editLocation([objectLocation])\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"error\" class=\"alert alert-danger mt-2\">\n    <ExclamationTriangleFill class=\"me-1\" />\n    <span>{{ msgErrorStatusText }}</span>\n  </div>\n\n  <div class=\"card mt-2\">\n    <h5 class=\"card-header p-2\">\n      <strong>{{ file.file }}</strong>\n      {{ ' ' }}\n      <small v-if=\"file.url\">\n        <a :href=\"file.url\" target=\"_blank\">\n          <BoxArrowUpRight />\n        </a>\n      </small>\n    </h5>\n    <div class=\"card-body p-2\">\n      <lt-file-metadata :file=\"file\" />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, ref} from 'vue';\nimport * as ltDataAuth from '../api/ltDataAuth';\nimport {CommonsFile, LatLng} from '../model';\nimport ltFileMetadata from './ltFileMetadata.vue';\nimport ltLocationInput from './ltLocationInput.vue';\nimport {FileDetails} from '../api/ltData';\nimport {t} from './useI18n';\nimport BoxArrowUpRight from 'bootstrap-icons/icons/box-arrow-up-right.svg?component';\nimport CameraFill from 'bootstrap-icons/icons/camera-fill.svg?component';\nimport ExclamationTriangleFill from 'bootstrap-icons/icons/exclamation-triangle-fill.svg?component';\nimport HouseFill from 'bootstrap-icons/icons/house-fill.svg?component';\nimport QuestionCircle from 'bootstrap-icons/icons/question-circle.svg?component';\nimport Save from 'bootstrap-icons/icons/save.svg?component';\n\nconst coordinates = defineModel<LatLng>('coordinates', {required: true});\nconst objectLocation = defineModel<LatLng>('objectLocation', {required: true});\nconst props = defineProps<{file: CommonsFile & FileDetails}>();\nconst error = ref<undefined>(undefined);\nconst collapseCameraLocation = ref(false);\nconst collapseObjectLocation = ref(false);\n\nconst msgCameraLocation = computed(() =>\n  t(\n    'Camera location via\\n<a href=\"https://commons.wikimedia.org/wiki/Template:Location\" target=\"_blank\"><code class=\"mediawiki-template\">Location</code></a>'\n  )\n);\nconst msgObjectLocation = computed(() =>\n  t(\n    'Object location via\\n<a href=\"https://commons.wikimedia.org/wiki/Template:Object_location\" target=\"_blank\"><code class=\"mediawiki-template\">Object location</code></a>'\n  )\n);\nconst msgErrorStatusText = computed(() =>\n  t('Failed to save: {{$ctrl.error.statusText}}').replace(\n    '{{$ctrl.error.statusText}}',\n    error.value?.statusText\n  )\n);\n\nfunction editLocation(cc?: LatLng[]) {\n  error.value = undefined;\n  if (cc === undefined) {\n    cc = [];\n    if (coordinates.value?.isChanged) {\n      cc.push(coordinates.value);\n    }\n    if (objectLocation.value?.isChanged) {\n      cc.push(objectLocation.value);\n    }\n  }\n  return ltDataAuth.editLocation(props.file, cc).then(\n    () => {\n      cc!.forEach(c => {\n        if (c.type === 'Location') {\n          coordinates.value = c.commit();\n        } else if (c.type === 'Object location') {\n          objectLocation.value = c.commit();\n        }\n      });\n    },\n    e => {\n      error.value = e;\n    }\n  );\n}\n</script>\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\" class=\\\"bi bi-house-fill\\\" viewBox=\\\"0 0 16 16\\\">\\n  <path d=\\\"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z\\\"/>\\n  <path d=\\\"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z\\\"/>\\n</svg>\"","<template>\n  <div ref=\"mapRef\" class=\"map fill\" style=\"min-height: 300px\"></div>\n</template>\n\n<script setup lang=\"ts\">\nimport L from 'leaflet';\nimport {LatLng} from '../model';\nimport {onMounted, ref, watch} from 'vue';\nimport {useLeafletMap} from './useLeafletMap';\nimport type {MapView} from './useLeafletMap';\nimport HouseFill from 'bootstrap-icons/icons/house-fill.svg?raw';\n\nconst coordinates = defineModel<LatLng>('coordinates', {required: true});\nconst objectLocation = defineModel<LatLng>('objectLocation', {required: true});\n\ndefineEmits<{\n  mapViewChanged: [mapView: MapView];\n}>();\n\nconst mapRef = ref<HTMLElement | null>(null);\n\nonMounted(() => {\n  const {map} = useLeafletMap(mapRef);\n\n  map.on('click', $event => mapClick($event));\n\n  watch(coordinates, mapMarkerUpdater(map), {immediate: true});\n  watch(objectLocation, mapMarkerUpdater(map), {immediate: true});\n});\n\nfunction mapMarkerUpdater(map: L.Map): (mapMarker: LatLng) => void {\n  let marker: L.Marker | undefined;\n  return mapMarker => {\n    const {lat, lng} = mapMarker;\n    if (mapMarker.isDefined && marker) {\n      map.setView({lat, lng});\n      marker.setLatLng({lat, lng});\n    } else if (mapMarker.isDefined) {\n      map.setView({lat, lng});\n      const icon = L.divIcon({\n        className: 'b-0',\n        html: `<div title=\"Object location\" style=\"color: red\">${HouseFill}</div>`,\n        iconAnchor: [6, 6],\n        iconSize: [12, 12]\n      });\n      marker = L.marker(\n        {lat, lng},\n        mapMarker.type === 'Location' ? {draggable: true} : {draggable: true, icon}\n      )\n        .on('moveend', $event => markerMoveend($event as L.LeafletMouseEvent, mapMarker))\n        .addTo(map);\n    } else if (marker) {\n      marker.remove();\n      marker = undefined;\n    }\n  };\n}\n\nfunction mapClick($event: L.LeafletMouseEvent): void {\n  // http://leafletjs.com/reference.html#mouse-event\n  const {\n    latlng: {lat, lng},\n    originalEvent: {shiftKey}\n  } = $event;\n  if (!lat || !lng) return;\n  setLatLng(shiftKey ? 'Object location' : 'Location', lat, lng);\n}\n\nfunction markerMoveend($event: L.LeafletMouseEvent, target: LatLng): void {\n  const {lat, lng} = ($event.target as L.Marker).getLatLng();\n  if (!lat || !lng) return;\n  setLatLng(target.type, lat, lng);\n}\n\nfunction setLatLng(type: LatLng['type'], lat: number, lng: number) {\n  if (type === 'Object location') {\n    objectLocation.value = objectLocation.value.withLatLng(lat, lng).roundToPrecision();\n  } else {\n    coordinates.value = coordinates.value.withLatLng(lat, lng).roundToPrecision();\n  }\n}\n</script>\n","<template>\n  <div v-if=\"isLoading\" class=\"row mt-3\">\n    <div class=\"col-sm-12\">\n      <div class=\"jumbotron\">\n        <p>{{ t('Loading file details …') }}</p>\n        <lt-spinner />\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"!isLoading && !$titles?.length\" class=\"row mt-3\">\n    <div class=\"col-sm-12\">\n      <div class=\"alert alert-warning\">\n        <ExclamationTriangleFill class=\"me-1\" />\n        <!-- eslint-disable-next-line vue/no-v-html -->\n        <span v-if=\"category\" v-html=\"msgNoFilesForCategory\"></span>\n        <!-- eslint-disable-next-line vue/no-v-html -->\n        <span v-if=\"user\" v-html=\"msgNoFilesForUser\"></span>\n      </div>\n    </div>\n  </div>\n\n  <div\n    v-if=\"!isLoading && $titles?.length\"\n    class=\"row flex-grow-1 mt-3\"\n    style=\"--bs-gutter-x: 0.5rem\"\n  >\n    <div\n      class=\"col-lg-3 col-xl-2 mt-3 mt-lg-0 fill col-lg-h40\"\n      style=\"overflow-y: scroll; overflow-x: hidden\"\n    >\n      <div class=\"progress\">\n        <div\n          class=\"progress-bar\"\n          role=\"progressbar\"\n          :style=\"{width: titlesDefinedAndSavedPercent + '%'}\"\n        >\n          {{ titlesDefinedAndSaved.length }} / {{ $titles?.length }}\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"checkbox\">\n          <label>\n            <input v-model=\"$showGeolocated\" type=\"checkbox\" />\n            <span>{{ t('Also show geolocated files') }}</span>\n          </label>\n        </div>\n      </div>\n      <div class=\"input-group\">\n        <div class=\"input-group-text\">\n          <Search />\n        </div>\n        <input v-model=\"$filter\" class=\"form-control\" type=\"text\" />\n      </div>\n      <div tabindex=\"1\" @keydown=\"keyPressedInList($event)\">\n        <ul class=\"list-group\">\n          <li\n            v-for=\"title in filteredTitles\"\n            :key=\"title.file\"\n            class=\"list-group-item py-1 px-2 text-truncate\"\n            :class=\"{'list-group-item-info': $title === title}\"\n            role=\"button\"\n            @click=\"$title = title\"\n          >\n            <abbr v-if=\"title.coordinates.isDefinedAndSaved\" title=\"Location ✔\">\n              <CameraFill class=\"me-1\" />\n            </abbr>\n            <abbr v-if=\"title.objectLocation.isDefinedAndSaved\" title=\"Object location ✔\">\n              <HouseFill class=\"me-1\" />\n            </abbr>\n            <span>{{ title.file }}</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div\n      v-if=\"$title\"\n      class=\"col-lg-9 col-xl-3 mt-3 mt-lg-0 fill col-lg-h40\"\n      style=\"overflow-y: scroll; overflow-x: hidden\"\n    >\n      <div class=\"row\">\n        <div class=\"col-lg-5 col-xl-12\">\n          <lt-file-details\n            v-model:coordinates=\"$title.coordinates\"\n            v-model:object-location=\"$title.objectLocation\"\n            :file=\"$title\"\n          />\n        </div>\n        <div class=\"col-lg-7 col-xl-12 mt-2\">\n          <lt-file-thumbnail :file=\"$title\" />\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"$title\" class=\"col-lg-12 col-xl-7 mt-3 mt-lg-0 fill col-lg-h60\">\n      <lt-map\n        v-model:coordinates=\"$title.coordinates\"\n        v-model:object-location=\"$title.objectLocation\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, computed, onMounted, watch} from 'vue';\nimport {useRoute} from 'vue-router';\nimport * as ltData from '../api/ltData';\nimport {CommonsFile} from '../model';\nimport ltSpinner from './ltSpinner.vue';\nimport ltFileDetails from './ltFileDetails.vue';\nimport ltFileThumbnail from './ltFileThumbnail.vue';\nimport ltMap from './ltMap.vue';\nimport {t} from './useI18n';\nimport {useAppTitle, routeTitlePart} from './useAppTitle';\nimport CameraFill from 'bootstrap-icons/icons/camera-fill.svg?component';\nimport ExclamationTriangleFill from 'bootstrap-icons/icons/exclamation-triangle-fill.svg?component';\nimport HouseFill from 'bootstrap-icons/icons/house-fill.svg?component';\nimport Search from 'bootstrap-icons/icons/search.svg?component';\n\nconst $route = useRoute();\nconst category: string = $route.query.category as string;\nconst user: string = $route.query.user as string;\nconst $error = ref<unknown>();\nconst $filter = ref('');\nconst $showGeolocated = ref(false);\nconst $title = ref<CommonsFile | undefined>(undefined);\nconst $titles = ref<CommonsFile[] | undefined>(undefined);\nconst isLoading = ref(false);\n\nuseAppTitle(routeTitlePart(), t('Geolocate files'));\n\nonMounted(() => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const files$q = ltData.getFiles($route.query as any);\n  const fileDetails$q = files$q\n    .then(titles => ltData.getCoordinates(titles))\n    .then(titles => {\n      $titles.value = titles.sort((t1, t2) => t1.file.localeCompare(t2.file));\n      $showGeolocated.value = $titles.value.length <= 5;\n      // select first visible title\n      $title.value = filteredTitles.value[0];\n    });\n  isLoading.value = true;\n  Promise.all([files$q, fileDetails$q]).finally(() => (isLoading.value = false));\n});\n\nwatch($title, title => title && titleChanged(title));\n\nfunction _hasLocation(title: CommonsFile) {\n  return title.coordinates.isDefinedAndSaved || title.objectLocation.isDefinedAndSaved;\n}\n\nconst filteredTitles = computed((): CommonsFile[] => {\n  let titles = $titles.value || [];\n  titles = $showGeolocated.value ? titles : titles.filter(t => !_hasLocation(t));\n  titles = titles.filter(t => JSON.stringify(t).includes($filter.value));\n  return titles;\n});\n\nconst titlesDefinedAndSaved = computed((): CommonsFile[] => {\n  return $titles.value ? $titles.value.filter(t => _hasLocation(t)) : [];\n});\n\nconst titlesDefinedAndSavedPercent = computed((): number => {\n  return (100 * titlesDefinedAndSaved.value.length) / ($titles.value || []).length;\n});\n\nfunction keyPressedInList($event: KeyboardEvent): void {\n  const titles = filteredTitles.value;\n  const direction = keydownToDirection($event);\n  if (direction === undefined || $title.value === undefined) {\n    return;\n  }\n  const index = titles.indexOf($title.value);\n  const newIndex = direction + index;\n  if (newIndex >= 0 && titles[newIndex]) {\n    $title.value = titles[newIndex];\n    const target = $event.target as HTMLElement;\n    window.requestAnimationFrame(() =>\n      target.querySelectorAll('.list-group-item')?.[newIndex]?.scrollIntoView?.({block: 'center'})\n    );\n  }\n}\n\nfunction titleChanged(title: CommonsFile): void {\n  $error.value = undefined;\n  // if (title?.coordinates) {\n  //   updateMapView(title.coordinates);\n  // }\n  if (title?.pageid) {\n    ltData.getFileDetails(title.pageid).then(fileDetails => {\n      Object.assign(title, fileDetails);\n      // const {lat, lng} = title.objectLocation;\n      // if (!title.coordinates?.lat) {\n      //   updateMapView({lat, lng});\n      // }\n    });\n  }\n}\n\nfunction keydownToDirection($event: KeyboardEvent) {\n  if ($event && $event.key) {\n    switch ($event.key) {\n      case 'Right':\n      case 'ArrowRight':\n      case 'Down':\n      case 'ArrowDown':\n        $event.preventDefault();\n        return 1;\n      case 'Left':\n      case 'ArrowLeft':\n      case 'Up':\n      case 'ArrowUp':\n        $event.preventDefault();\n        return -1;\n    }\n  }\n}\n\nconst msgNoFilesForCategory = computed(() =>\n  t('Fetched 0 files for category <code>{{$ctrl.category}}</code>!').replace(\n    '{{$ctrl.category}}',\n    category\n  )\n);\nconst msgNoFilesForUser = computed(() =>\n  t('Fetched 0 files for user <code>{{$ctrl.user}}</code>!').replace('{{$ctrl.user}}', user)\n);\n</script>\n"],"names":["REGEXP","modelValue","_useModel","__props","emit","__emit","type","ref","_a","inputElement","updateLatLng","viewValue","t","m","valid","_c","_b","LatLng","rollback","coordinates","objectLocation","props","error","collapseCameraLocation","collapseObjectLocation","msgCameraLocation","computed","msgObjectLocation","msgErrorStatusText","editLocation","cc","ltDataAuth.editLocation","c","e","HouseFill","mapRef","onMounted","map","useLeafletMap","$event","mapClick","watch","mapMarkerUpdater","marker","mapMarker","lat","lng","icon","L","markerMoveend","shiftKey","setLatLng","target","$route","useRoute","category","user","$error","$filter","$showGeolocated","$title","$titles","isLoading","useAppTitle","routeTitlePart","files$q","ltData.getFiles","fileDetails$q","titles","ltData.getCoordinates","t1","t2","filteredTitles","title","titleChanged","_hasLocation","titlesDefinedAndSaved","titlesDefinedAndSavedPercent","keyPressedInList","direction","keydownToDirection","index","newIndex","ltData.getFileDetails","fileDetails","msgNoFilesForCategory","msgNoFilesForUser"],"mappings":"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","x_google_ignoreList":[2]}