{"version":3,"file":"COke9gHBZjEn1SXIvaR.js","sources":["../../app/components/ltAllMap.vue"],"sourcesContent":["<template>\n  <div ref=\"mapRef\" class=\"map fill\" style=\"min-height: 300px\"></div>\n</template>\n\n<script setup lang=\"ts\">\nimport {onMounted, ref} from 'vue';\nimport {useRoute} from 'vue-router';\nimport L from 'leaflet';\nimport * as ltData from '../api/ltData';\nimport {useLeafletMap} from './useLeafletMap';\nimport {t} from './useI18n';\nimport {useAppTitle, routeTitlePart} from './useAppTitle';\n\nconst $route = useRoute();\nconst mapRef = ref<HTMLElement | null>(null);\n\nuseAppTitle(routeTitlePart(), t('Map'));\n\nonMounted(async () => {\n  const {map} = useLeafletMap(mapRef);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const titles = await ltData.getFiles($route.query as any);\n  const files = await ltData.getCoordinates(titles);\n  const bounds = files.flatMap(title => {\n    if (!title.coordinates.isDefined) return [];\n    const {lat, lng} = title.coordinates;\n    const marker = L.circleMarker({lat, lng}, {color: '#2a4b8d'})\n      .bindTooltip(title.file)\n      .bindPopup(\n        () => `\n<div style=\"width: 300px\">\n  <p><a href=\"${title.url}\" target=\"_blank\">${title.file}</a></p>\n  <img src=\"${title.imageUrl(300)}\" style=\"width: 100%\" />\n</div>`\n      )\n      .addTo(map);\n    return [marker.getLatLng()];\n  });\n  map.fitBounds(bounds);\n});\n</script>\n"],"names":["$route","useRoute","mapRef","ref","useAppTitle","routeTitlePart","t","onMounted","map","useLeafletMap","titles","ltData.getFiles","bounds","ltData.getCoordinates","title","lat","lng","L"],"mappings":"oRAaA,MAAMA,EAASC,IACTC,EAASC,EAAwB,IAAI,EAE3C,OAAAC,EAAYC,EAAe,EAAGC,EAAE,KAAK,CAAC,EAEtCC,EAAU,SAAY,CACpB,KAAM,CAAC,IAAAC,CAAA,EAAOC,EAAcP,CAAM,EAE5BQ,EAAS,MAAMC,EAAgBX,EAAO,KAAY,EAElDY,GADQ,MAAMC,EAAsBH,CAAM,GAC3B,QAAiBI,GAAA,CACpC,GAAI,CAACA,EAAM,YAAY,gBAAkB,CAAA,EACzC,KAAM,CAAC,IAAAC,EAAK,IAAAC,GAAOF,EAAM,YAWlB,MAAA,CAVQG,EAAE,aAAa,CAAC,IAAAF,EAAK,IAAAC,CAAG,EAAG,CAAC,MAAO,SAAU,CAAA,EACzD,YAAYF,EAAM,IAAI,EACtB,UACC,IAAM;AAAA;AAAA,gBAEEA,EAAM,GAAG,qBAAqBA,EAAM,IAAI;AAAA,cAC1CA,EAAM,SAAS,GAAG,CAAC;AAAA,OAAA,EAG1B,MAAMN,CAAG,EACG,UAAA,CAAW,CAAA,CAC3B,EACDA,EAAI,UAAUI,CAAM,CAAA,CACrB"}