{"version":3,"file":"DJVv-EsHuEDFu7DLbtx.js","sources":["../../app/components/ltGallery.vue"],"sourcesContent":["<template>\n  <div v-if=\"isLoading\" class=\"mt-3 row\">\n    <div class=\"col-sm-12\">\n      <div class=\"jumbotron\">\n        <p>{{ t('Loading file details â€¦') }}</p>\n        <lt-spinner />\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"!isLoading\" class=\"mt-3 row\">\n    <div class=\"col-sm-12\">\n      <label class=\"me-3\">{{ t('Sorting') }}:</label>\n      <div v-for=\"column in sortColumns\" :key=\"column.key\" class=\"form-check form-check-inline\">\n        <label class=\"form-check-label\">\n          <component :is=\"column.icon\" v-if=\"column.icon\" class=\"me-1\" />\n          {{ column.label }}\n          <input\n            v-model=\"sortColumn\"\n            class=\"form-check-input\"\n            type=\"radio\"\n            name=\"sortColumn\"\n            :value=\"column.key\"\n          />\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"mt-3 row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4\">\n    <div v-for=\"title in sortedTitles\" :key=\"title\" class=\"col\">\n      <div class=\"card\">\n        <div class=\"card-img-top\">\n          <lt-file-thumbnail :file=\"title\" />\n        </div>\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">\n            {{ title.file }}\n            {{ ' ' }}\n            <a :href=\"title.url\" target=\"_blank\">\n              <BoxArrowUpRight />\n            </a>\n          </h5>\n          <div class=\"card-text\">\n            <lt-file-metadata :file=\"title\" :description=\"false\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref} from 'vue';\nimport {useRoute} from 'vue-router';\nimport {useSorted} from '@vueuse/core';\nimport {FileDetails, getFileDetails} from '../api/ltData';\nimport {getCoordinates} from '../api/ltData';\nimport {getFiles} from '../api/ltData';\nimport {CommonsFile} from '../model';\nimport ltFileMetadata from './ltFileMetadata.vue';\nimport ltFileThumbnail from './ltFileThumbnail.vue';\nimport ltSpinner from './ltSpinner.vue';\nimport {t} from './useI18n';\nimport {useAppTitle, routeTitlePart} from './useAppTitle';\nimport BoxArrowUpRight from 'bootstrap-icons/icons/box-arrow-up-right.svg?component';\nimport CalendarEvent from 'bootstrap-icons/icons/calendar-event.svg?component';\nimport PersonFill from 'bootstrap-icons/icons/person-fill.svg?component';\n\nconst $route = useRoute();\nconst isLoading = ref(true);\nconst titles = ref<(CommonsFile & FileDetails)[]>([]);\n\ntype SortColumn = keyof Pick<\n  CommonsFile & FileDetails,\n  'file' | 'description' | 'author' | 'timestamp'\n>;\nconst sortColumns: {key: SortColumn; label: string; icon?: string}[] = [\n  {key: 'file', label: t('Title'), icon: undefined},\n  {key: 'description', label: t('Description'), icon: undefined},\n  {key: 'author', label: t('Author'), icon: PersonFill},\n  {key: 'timestamp', label: t('Date'), icon: CalendarEvent}\n];\nconst sortColumn = ref<SortColumn>('file');\nconst sortDirection = ref(1);\nconst sortedTitles = useSorted(\n  titles,\n  (t1, t2) => sortDirection.value * (t1[sortColumn.value]?.localeCompare(t2[sortColumn.value]) ?? 0)\n);\n\nuseAppTitle(routeTitlePart(), t('Gallery'));\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ngetFiles($route.query as any)\n  .then(t => getCoordinates(t))\n  .then(t => (titles.value = t as unknown as (CommonsFile & FileDetails)[]))\n  .finally(() => {\n    isLoading.value = false;\n    titles.value.forEach(title =>\n      getFileDetails(title.pageid, 'categories|imageinfo', 'extmetadata').then(fileDetails =>\n        Object.assign(title, fileDetails)\n      )\n    );\n  });\n</script>\n"],"names":["$route","useRoute","isLoading","ref","titles","sortColumns","PersonFill","CalendarEvent","sortColumn","sortDirection","sortedTitles","useSorted","t1","t2","_a","useAppTitle","routeTitlePart","getFiles","t","getCoordinates","getFileDetails","title","fileDetails"],"mappings":"yyBAqEA,MAAMA,EAASC,IACTC,EAAYC,EAAI,EAAI,EACpBC,EAASD,EAAmC,CAAA,CAAE,EAM9CE,EAAiE,CACrE,CAAC,IAAK,OAAQ,MAAO,EAAE,OAAO,EAAG,KAAM,MAAS,EAChD,CAAC,IAAK,cAAe,MAAO,EAAE,aAAa,EAAG,KAAM,MAAS,EAC7D,CAAC,IAAK,SAAU,MAAO,EAAE,QAAQ,EAAG,KAAMC,CAAU,EACpD,CAAC,IAAK,YAAa,MAAO,EAAE,MAAM,EAAG,KAAMC,CAAa,CAAA,EAEpDC,EAAaL,EAAgB,MAAM,EACnCM,EAAgBN,EAAI,CAAC,EACrBO,EAAeC,EACnBP,EACA,CAACQ,EAAIC,IAAO,OAAA,OAAAJ,EAAc,SAASK,EAAAF,EAAGJ,EAAW,KAAK,IAAnB,YAAAM,EAAsB,cAAcD,EAAGL,EAAW,KAAK,KAAM,GAAA,EAGlG,OAAAO,EAAYC,EAAe,EAAG,EAAE,SAAS,CAAC,EAG1CC,EAASjB,EAAO,KAAY,EACzB,KAAKkB,GAAKC,EAAeD,CAAC,CAAC,EAC3B,KAAKA,GAAMd,EAAO,MAAQc,CAA8C,EACxE,QAAQ,IAAM,CACbhB,EAAU,MAAQ,GAClBE,EAAO,MAAM,WACXgB,EAAeC,EAAM,OAAQ,uBAAwB,aAAa,EAAE,KAClEC,GAAA,OAAO,OAAOD,EAAOC,CAAW,CAClC,CAAA,CACF,CACD"}